import{r as t,h as s,H as e,g as i}from"./p-8175557e.js";const a=class{constructor(s){t(this,s),this.tableTitle=void 0,this.tableType="borderless",this.stacked=!0,this.rows=void 0,this.cols=void 0,this.cells=null}getCellsInRow(t){const s=t.querySelectorAll("span"),e=Array.from(s);return this.cols||(this.cols=e.length),e}getRows(){const t=Array.from(this.el.querySelectorAll("va-table-row"));return t.forEach((t=>t.removeAttribute("role"))),this.rows||(this.rows=t.length),t}getAllCells(){const t=[];let s=0;for(const e of this.getRows()){const i=this.getCellsInRow(e);i.forEach((t=>{t.setAttribute("slot",`va-table-slot-${s}`),s++})),t.push(...i)}this.cells=t}makeFragment(){const t=document.createDocumentFragment();return this.cells.forEach((s=>{t.appendChild(s.cloneNode(!0))})),t}makeVATable(){const t=document.createElement("va-table-inner");t.setAttribute("rows",`${this.rows}`),t.setAttribute("cols",`${this.cols}`),t.setAttribute("stacked",this.stacked?"true":"false"),this.tableTitle&&t.setAttribute("table-title",this.tableTitle),this.tableType&&t.setAttribute("table-type",this.tableType);const s=this.makeFragment();return t.appendChild(s),t}watchForDataChanges(){const t=this.el.querySelectorAll("va-table-row")[1];this.observer=new MutationObserver((()=>{const t=this.el.querySelector("va-table-inner");t&&(t.remove(),this.rows=null,this.cols=null,this.cells=null),this.addVaTableInner()})),this.observer.observe(t,{childList:!0,subtree:!0,characterData:!0})}disconnectedCallback(){this.observer&&this.observer.disconnect()}addVaTableInner(){this.getAllCells();const t=this.makeVATable();this.el.appendChild(t)}componentDidLoad(){this.addVaTableInner(),this.watchForDataChanges()}render(){return s(e,{key:"3034e05e25b0ad0c1713b5869e6485ba805233a3"},s("slot",{key:"6c9ff0c65ceffcda78e4024250048e84345f85cb"}))}get el(){return i(this)}};a.style="va-table-row{display:none}";export{a as va_table}